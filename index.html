<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Finatics Aquatics - African Cichlid Breeders" />
  <title>Finatics Aquatics</title>
  <link rel="stylesheet" href="css/style.css" />
  <script defer>
    const sheetUrl = 'https://script.google.com/macros/s/AKfycby7R9zrOBS-pg0AwxU_yRaKLo6VUWM8oPjLFkZhiJyl2SkTVw98ENSsO3iC3ISHYqSd/exec';
    let stockData = {};

    async function fetchStock() {
      try {
        const res = await fetch(sheetUrl);
        stockData = await res.json();

        const grid = document.getElementById('fish-grid');
        const fishSelect = document.getElementById('fish');
        const sizeSelect = document.getElementById('size');

        grid.innerHTML = '';
        fishSelect.innerHTML = '<option value="">Select a species</option>';
        sizeSelect.innerHTML = '<option value="">Please select a species first</option>';

        for (const fish in stockData) {
          const items = stockData[fish];

          const card = document.createElement('div');
          card.className = 'fish-card';

          const img = document.createElement('img');
          const baseName = fish.toLowerCase().replace(/\s+/g, '-');
          img.src = `images/${baseName}.jpg`;
          img.alt = fish;

          img.onerror = () => {
            img.onerror = null;
            img.src = `images/${baseName}.png`;
            img.onerror = () => {
              img.src = 'images/fallback.jpg';
            };
          };

          card.appendChild(img);

          const name = document.createElement('h3');
          name.textContent = fish;
          card.appendChild(name);

          const list = document.createElement('ul');
          list.className = 'stock-table';

          items.forEach(entry => {
            const li = document.createElement('li');
            li.innerHTML = `${entry.size} — £${entry.price} — <strong>In Stock: ${entry.stock}</strong>`;
            list.appendChild(li);
          });

          card.appendChild(list);
          grid.appendChild(card);

          const option = document.createElement('option');
          option.value = fish;
          option.textContent = fish;
          fishSelect.appendChild(option);
        }

        fishSelect.addEventListener('change', () => {
          const selectedFish = fishSelect.value;
          sizeSelect.innerHTML = '';

          if (stockData[selectedFish]) {
            stockData[selectedFish].forEach(entry => {
              const option = document.createElement('option');
              option.value = entry.size;
              option.textContent = `${entry.size} — £${entry.price} — In Stock: ${entry.stock}`;
              sizeSelect.appendChild(option);
            });
          } else {
            sizeSelect.innerHTML = '<option value="">Please select a species first</option>';
          }
        });
      } catch (error) {
        console.error('Failed to load stock data:', error);
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
  fetchStock();

  const cart = [];
  const addToCartBtn = document.getElementById('add-to-cart');
  const cartItems = document.getElementById('cart-items');
  const cartTotal = document.getElementById('cart-total');

  addToCartBtn.addEventListener('click', () => {
    const fish = document.getElementById('fish').value;
    const size = document.getElementById('size').value;
    const quantity = parseInt(document.getElementById('quantity').value);

    if (!fish || !size || isNaN(quantity) || quantity <= 0) {
      alert('Please select a fish, size, and quantity.');
      return;
    }

    const entry = stockData[fish].find(e => e.size === size);
    const price = entry ? entry.price : 0;
    cart.push({ fish, size, quantity, price });

    renderCart();
  });

  function renderCart() {
    cartItems.innerHTML = '';
    let total = 0;
    cart.forEach((item) => {
      const li = document.createElement('li');
      const subtotal = item.quantity * item.price;
      li.textContent = `${item.quantity} x ${item.fish} (${item.size}) - £${subtotal}`;
      total += subtotal;
      cartItems.appendChild(li);
    });
    cartTotal.textContent = total > 0 ? `Total: £${total}` : '';
  }
});

  </script>
</head>
<body>
  <header class="hero">
    <img src="images/FinaticsCoveringPhoto.png" alt="Finatics Aquatics Banner" class="hero-image" />
    <div class="hero-overlay">
      <img src="images/FinaticsAquaticsLogoV2.png" alt="Finatics Aquatics Logo" class="hero-logo" />
      <h1 class="hero-title">Bred With Passion. <br />Raised With Care.</h1>
    </div>
  </header>

  <nav>
    <ul>
      <li><a href="#available">Available Fish</a></li>
      <li><a href="#setup">Our Setup</a></li>
      <li><a href="#about">About Us</a></li>
      <li><a href="#contact">Contact</a></li>
    </ul>
  </nav>

  <main>
    <section id="available">
      <h2>Available Fish</h2>
      <div class="fish-grid" id="fish-grid">
        <!-- Fish cards will be generated here by JavaScript -->
      </div>
    </section>

    <section id="reserve">
      <h2>Reserve Your Fish</h2>
      <form action="https://formspree.io/f/your-form-id" method="POST" class="reserve-form">
        <label for="name">Your Name</label>
        <input type="text" id="name" name="name" required />

        <label for="email">Email</label>
        <input type="email" id="email" name="email" required />

        <label for="fish">Fish Species</label>
        <select id="fish" name="fish" required></select>

        <label for="size">Preferred Size</label>
        <select id="size" name="size" required>
          <option value="">Please select a species first</option>
        </select>

        <label for="quantity">Quantity</label>
        <input type="number" id="quantity" name="quantity" min="1" required />

        <button type="button" id="add-to-cart" class="reserve-button">Add to Cart</button>
        <button type="submit" class="reserve-button">Submit Reservation</button>

        <section id="cart">
            <h3>Cart</h3>
            <ul id="cart-items"></ul>
            <p id="cart-total"></p>
          </section>
          
      </form>
    </section>

    <section id="setup">
      <h2>Our Breeding Setup</h2>
      <p>
        We use a modular tank system with clean water cycling and natural
        filtration through aquaponics. Each breeding pair is given a dedicated
        tank to ensure quality offspring and optimal health.
      </p>
    </section>

    <section id="about">
      <h2>About Us</h2>
      <p>
        We are a family-run breeder in the UK, passionate about African
        cichlids. Our goal is to produce vibrant, healthy fish raised in a
        loving environment. From tank care to feeding routines, we involve our
        children in every part of the process.
      </p>
    </section>

    <section id="contact">
      <h2>Contact Us</h2>
      <p>Email: <a href="mailto:info@finaticsaquatics.com">info@finaticsaquatics.com</a></p>
      <p>WhatsApp: 07XXX XXXXXX</p>
      <p>Follow us on Facebook and Instagram</p>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 Finatics Aquatics. All rights reserved.</p>
    <p><a href="https://finatic-andrewbetteridge.github.io/FinaticsAquatics.github.io-/">Visit our live site</a></p>
  </footer>
</body>
</html>
